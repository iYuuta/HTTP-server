<!DOCTYPE html>
<html lang="en" class="h-full">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Webserver Test Panel</title>
	<meta name="color-scheme" content="light dark" />
	<style>
		:root {
			color-scheme: light dark;
			--bg-start: #f8fafc;
			/* slate-50 */
			--bg-end: #f1f5f9;
			/* slate-100 */
			--text: #0f172a;
			/* slate-800 */
			--muted: #334155;
			/* slate-700 */
			--border: rgba(15, 23, 42, 0.12);
			/* slate-200/60 */
			--border-strong: rgba(15, 23, 42, 0.2);
			--card-bg: rgba(255, 255, 255, 0.7);
			--shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
			--ring: rgba(59, 130, 246, 0.7);

			--blue: #2563eb;
			/* blue-600 */
			--blue-50: #eff6ff;
			--indigo: #4f46e5;
			/* indigo-600 */
			--emerald: #059669;
			/* emerald-600 */
			--purple: #7c3aed;
			/* purple-600 */
			--rose: #e11d48;
			/* rose-600 */
			--amber: #f59e0b;
			/* amber-500 */

			--code-bg: #f8fafc;
		}

		@media (prefers-color-scheme: dark) {
			:root {
				--bg-start: #0f172a;
				/* slate-900 */
				--bg-end: #020617;
				/* slate-950 */
				--text: #e2e8f0;
				/* slate-200 */
				--muted: #cbd5e1;
				/* slate-300 */
				--border: rgba(148, 163, 184, 0.2);
				/* slate-800-ish */
				--card-bg: rgba(2, 6, 23, 0.7);
				--shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.35), 0 4px 6px -4px rgba(0, 0, 0, 0.35);
				--code-bg: #0b1220;
			}
		}

		/* Base */
		html,
		body {
			height: 100%;
		}

		body {
			margin: 0;
			font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
			background: linear-gradient(135deg, var(--bg-start), var(--bg-end));
			color: var(--text);
			-webkit-font-smoothing: antialiased;
			-moz-osx-font-smoothing: grayscale;
		}

		.container {
			max-width: 72rem;
			/* 1152px similar to max-w-6xl */
			margin: 0 auto;
			padding: 1.5rem;
			/* p-6 */
		}

		/* Header */
		.site-header {
			position: sticky;
			top: 0;
			z-index: 10;
			backdrop-filter: blur(8px);
			-webkit-backdrop-filter: blur(8px);
			background: var(--card-bg);
			border-bottom: 1px solid var(--border);
		}

		.header-inner {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding-block: 1rem;
		}

		.brand {
			display: flex;
			align-items: center;
			gap: .75rem;
		}

		.brand-icon {
			display: inline-flex;
			height: 2.5rem;
			width: 2.5rem;
			align-items: center;
			justify-content: center;
			border-radius: .75rem;
			color: white;
			background: linear-gradient(135deg, #3b82f6, var(--indigo));
			box-shadow: 0 10px 15px -3px rgba(0, 0, 0, .2), 0 4px 6px -4px rgba(0, 0, 0, .2);
		}

		.h-4 {
			height: 1rem
		}

		.w-4 {
			width: 1rem
		}

		.h-5 {
			height: 1.25rem
		}

		.w-5 {
			width: 1.25rem
		}

		.h-6 {
			height: 1.5rem
		}

		.w-6 {
			width: 1.5rem
		}

		.title {
			font-size: 1.5rem;
			font-weight: 600;
			letter-spacing: -.01em;
		}

		.nav {
			display: flex;
			gap: 1.5rem;
			font-size: .9rem;
		}

		.nav-link {
			color: #334155;
			text-decoration: none;
			transition: color .2s ease;
		}

		.nav-link:hover {
			color: #0f172a;
		}

		@media (prefers-color-scheme: dark) {
			.nav-link {
				color: #cbd5e1;
			}

			.nav-link:hover {
				color: #ffffff;
			}
		}

		/* Cards */
		.card {
			border-radius: 1rem;
			border: 1px solid var(--border);
			background: var(--card-bg);
			padding: 1.5rem;
			box-shadow: var(--shadow);
			transition: box-shadow .2s ease, transform .2s ease;
		}

		.card:hover {
			box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.15), 0 8px 10px -6px rgba(0, 0, 0, 0.15);
		}

		.section-title {
			display: flex;
			align-items: center;
			gap: .75rem;
			margin-bottom: 1rem;
		}

		.icon {
			display: inline-flex;
			height: 2.5rem;
			width: 2.5rem;
			border-radius: .5rem;
			align-items: center;
			justify-content: center;
		}

		.icon svg {
			height: 1.25rem;
			width: 1.25rem;
		}

		.icon.icon-sm {
			height: 2rem;
			width: 2rem;
		}

		.icon.icon-sm svg {
			height: 1rem;
			width: 1rem;
		}

		.icon.blue {
			background: #dbeafe;
			color: #2563eb;
		}

		.icon.indigo {
			background: #e0e7ff;
			color: #4f46e5;
		}

		.icon.emerald {
			background: #d1fae5;
			color: #059669;
		}

		.icon.purple {
			background: #ede9fe;
			color: #7c3aed;
		}

		.icon.rose {
			background: #ffe4e6;
			color: #e11d48;
		}

		.icon.amber {
			background: #fef3c7;
			color: #d97706;
		}

		@media (prefers-color-scheme: dark) {
			.icon.blue {
				background: rgba(37, 99, 235, .2);
				color: #93c5fd;
			}

			.icon.indigo {
				background: rgba(79, 70, 229, .2);
				color: #a5b4fc;
			}

			.icon.emerald {
				background: rgba(5, 150, 105, .2);
				color: #6ee7b7;
			}

			.icon.purple {
				background: rgba(124, 58, 237, .2);
				color: #c4b5fd;
			}

			.icon.rose {
				background: rgba(225, 29, 72, .2);
				color: #fda4af;
			}

			.icon.amber {
				background: rgba(245, 158, 11, .2);
				color: #fcd34d;
			}
		}

		.h2 {
			font-size: 1.125rem;
			font-weight: 600;
			margin: 0;
		}

		/* Layout grids */
		.grid {
			display: grid;
			gap: 1.5rem;
		}

		.grid-2 {
			display: grid;
			grid-template-columns: 1fr;
			gap: 1.5rem;
		}

		@media(min-width: 768px) {
			.grid-2 {
				grid-template-columns: repeat(2, minmax(0, 1fr));
			}
		}

		.grid-2-sm {
			display: grid;
			grid-template-columns: 1fr;
			gap: 1rem;
		}

		@media(min-width: 640px) {
			.grid-2-sm {
				grid-template-columns: repeat(2, minmax(0, 1fr));
			}
		}

		.span-2 {
			grid-column: span 2;
		}

		/* Forms */
		.form {
			display: flex;
			flex-direction: column;
			gap: .75rem;
		}

		.label {
			display: block;
			font-size: .9rem;
			font-weight: 500;
			margin-bottom: .25rem;
		}

		.input,
		.select,
		.textarea {
			width: 100%;
			border-radius: .5rem;
			border: 1px solid #cbd5e1;
			background: #fff;
			color: #0f172a;
			padding: .5rem .75rem;
			font-size: .9rem;
			outline: none;
			transition: box-shadow .2s, border-color .2s;
			box-shadow: 0 1px 1px rgba(0, 0, 0, .03);
		}

		.textarea {
			resize: vertical;
		}

		.select {
			appearance: auto;
		}

		.input:focus,
		.select:focus,
		.textarea:focus {
			border-color: transparent;
			box-shadow: 0 0 0 2px var(--ring);
		}

		@media (prefers-color-scheme: dark) {

			.input,
			.select,
			.textarea {
				background: #0b1220;
				border-color: #1f2937;
				color: #e2e8f0;
			}
		}

		.input-error {
			box-shadow: 0 0 0 2px #f43f5e !important;
		}

		.input-file {
			width: 100%;
			border: 1px dashed #cbd5e1;
			border-radius: .5rem;
			background: #fff;
			color: #334155;
			padding: .5rem .75rem;
			cursor: pointer;
		}

		@media (prefers-color-scheme: dark) {
			.input-file {
				background: #0b1220;
				border-color: #1f2937;
				color: #e2e8f0;
			}
		}

		/* Buttons */
		.btn {
			display: inline-flex;
			align-items: center;
			gap: .5rem;
			border-radius: .6rem;
			padding: .5rem 1rem;
			color: #fff;
			border: 0;
			cursor: pointer;
			box-shadow: 0 1px 2px rgba(0, 0, 0, .08);
			transition: transform .05s ease, filter .2s ease;
		}

		.btn:active {
			transform: translateY(1px);
		}

		.icon-inline {
			height: 1.25rem;
			width: 1.25rem;
			opacity: .9;
		}

		.btn-blue {
			background: linear-gradient(90deg, var(--blue), var(--indigo));
		}

		.btn-blue:hover {
			filter: brightness(1.05);
		}

		.btn-emerald {
			background: var(--emerald);
		}

		.btn-emerald:hover {
			filter: brightness(1.05);
		}

		.btn-purple {
			background: var(--purple);
		}

		.btn-purple:hover {
			filter: brightness(1.05);
		}

		.btn-rose {
			background: var(--rose);
		}

		.btn-rose:hover {
			filter: brightness(1.05);
		}

		.btn-amber {
			background: var(--amber);
		}

		.btn-amber:hover {
			filter: brightness(1.05);
		}

		/* Info box and codebox */
		.info-box {
			margin-bottom: 1rem;
			border-radius: .875rem;
			border: 1px solid rgba(59, 130, 246, .3);
			background: linear-gradient(90deg, var(--blue-50), #eef2ff);
			padding: .9rem 1rem;
			color: #1e3a8a;
			font-size: .9rem;
			box-shadow: 0 1px 2px rgba(0, 0, 0, .04);
		}

		@media (prefers-color-scheme: dark) {
			.info-box {
				border-color: rgba(79, 70, 229, .4);
				background: linear-gradient(90deg, #0b1220, #0a0f1a);
				color: #c7d2fe;
			}
		}

		.codebox {
			margin-top: .5rem;
			white-space: pre-wrap;
			border-radius: .5rem;
			border: 1px solid var(--border);
			background: var(--code-bg);
			padding: .75rem;
			font-size: .8rem;
			color: #334155;
		}

		@media (prefers-color-scheme: dark) {
			.codebox {
				border-color: #1f2937;
				color: #e2e8f0;
			}
		}

		/* Images */
		.img-card {
			display: block;
			height: auto;
			width: 100%;
			max-width: 20rem;
			border-radius: .75rem;
			border: 1px solid var(--border);
			box-shadow: 0 1px 2px rgba(0, 0, 0, .05);
		}

		.gallery-grid {
			display: grid;
			grid-template-columns: repeat(2, minmax(0, 1fr));
			gap: 1rem;
		}

		@media(min-width: 640px) {
			.gallery-grid {
				grid-template-columns: repeat(3, minmax(0, 1fr));
			}
		}

		.img-link {
			display: block;
			overflow: hidden;
			border-radius: .75rem;
			border: 1px solid var(--border);
			background: #fff;
			box-shadow: 0 1px 2px rgba(0, 0, 0, .05);
			transition: box-shadow .2s ease;
		}

		.img-link:hover {
			box-shadow: 0 6px 10px -3px rgba(0, 0, 0, .14);
		}

		.img-thumb {
			aspect-ratio: 1/1;
			width: 100%;
			object-fit: cover;
			transition: transform .2s ease;
		}

		.img-link:hover .img-thumb {
			transform: scale(1.02);
		}

		@media (prefers-color-scheme: dark) {
			.img-link {
				background: #0b1220;
				border-color: #1f2937;
			}
		}

		/* Page-specific helpers */
		.about-grid {
			align-items: start;
		}

		.stack {
			display: flex;
			flex-direction: column;
			gap: 1rem;
		}

		.muted {
			color: var(--muted);
			line-height: 1.7;
		}

		.link {
			display: inline-flex;
			align-items: center;
			gap: .5rem;
			font-size: .9rem;
			font-weight: 500;
			color: #475569;
			text-decoration: none;
		}

		.link:hover {
			color: #0f172a;
		}

		.spaced-top {
			margin-top: 1.5rem;
		}

		.max-w {
			max-width: 40rem;
		}

		.actions {
			display: flex;
			align-items: center;
			gap: .75rem;
		}

		/* Utilities for spacing if needed */
		.mt-1 {
			margin-top: .25rem
		}

		.mt-2 {
			margin-top: .5rem
		}

		.mt-3 {
			margin-top: .75rem
		}

		.mt-4 {
			margin-top: 1rem
		}

		.mb-1 {
			margin-bottom: .25rem
		}

		.mb-2 {
			margin-bottom: .5rem
		}

		.mb-3 {
			margin-bottom: .75rem
		}

		.mb-4 {
			margin-bottom: 1rem
		}

		/* Table for auto-index */
		.table {
			width: 100%;
			border-collapse: collapse;
			text-align: left;
		}

		.table thead th {
			padding: .75rem;
			border-bottom: 1px solid var(--border-strong);
			font-weight: 600;
		}

		.table tbody td {
			padding: .75rem;
			border-bottom: 1px solid var(--border);
		}

		.table .row {
			cursor: pointer;
		}

		.table .row:hover td {
			background: rgba(15, 23, 42, 0.03);
		}

		@media (prefers-color-scheme: dark) {
			.table tbody td {
				border-color: #1f2937;
			}

			.table .row:hover td {
				background: rgba(255, 255, 255, 0.05);
			}
		}
	</style>
</head>

<body>
	<header class="site-header">
		<div class="container header-inner">
			<div class="brand">
				<h1 class="title">Webserver Functionality Test</h1>
			</div>
			<nav class="nav">
				<a class="nav-link" href="about.html">About</a>
				<a class="nav-link" href="contact.html">Contact</a>
				<a class="nav-link" href="gallery.html">Gallery</a>
			</nav>
		</div>
	</header>

	<main class="container">
		<div class="info-box">
			Use these controls to verify GET, POST (CGI), file uploads, DELETE, and redirects on your webserver.
		</div>

		<div class="grid grid-2">
			<!-- GET Request -->
			<section class="card">
				<div class="section-title">
					<span class="icon blue">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
							<path
								d="M12 3l-4 4h3v7h2V7h3l-4-4Zm7 16H5v-2H3v2a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-2h-2v2Z" />
						</svg>
					</span>
					<h2 class="h2">GET Request Test</h2>
				</div>
				<form id="getForm" onsubmit="submitGet(event)" class="form">
					<div>
						<label for="getPath" class="label">Path to GET</label>
						<input id="getPath" type="text" placeholder="/images/image1.jpg" class="input" />
					</div>
					<button type="submit" class="btn btn-blue">
						<svg xmlns="http://www.w3.org/2000/svg" class="icon-inline" viewBox="0 0 24 24"
							fill="currentColor">
							<path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm1 14.59L8.41 12 13 7.41V16.6Z" />
						</svg>
						Send GET
					</button>
				</form>
			</section>

			<!-- CGI: GET or POST or DELETE -->
			<section class="card">
				<div class="section-title">
					<span class="icon emerald">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
							<path
								d="M3 6a3 3 0 0 1 3-3h4l2 2h6a3 3 0 0 1 3 3v1H3V6Zm0 3h18v9a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3V9Zm4 2v2h10v-2H7Z" />
						</svg>
					</span>
					<h2 class="h2">CGI Request (GET / POST / DELETE)</h2>
				</div>
				<form id="cgiForm" method="post" onsubmit="submitCgi(event)" class="form">
					<div>
						<label for="cgi-script" class="label">Choose CGI script</label>
						<select id="cgi-script" onchange="updateAction()" class="select">
							<option value="/cgi-bin/python-cgi.py">python-cgi.py</option>
							<option value="/cgi-bin/bash-cgi.sh">bash-cgi.sh</option>
							<option value="/cgi-bin/php-cgi.php">php-cgi.php</option>
						</select>
					</div>
					<div>
						<label for="cgi-method" class="label">HTTP Method</label>
						<select id="cgi-method" class="select">
							<option value="GET">GET</option>
							<option value="POST" selected>POST</option>
							<option value="DELETE">DELETE</option>
						</select>
					</div>
					<div class="grid grid-2-sm">
						<div>
							<label for="name" class="label">Name</label>
							<input id="name" type="text" name="name" required class="input" />
						</div>
						<div class="span-2">
							<label for="message" class="label">Message</label>
							<textarea id="message" name="message" rows="4" class="textarea"></textarea>
						</div>
					</div>
					<button type="submit" class="btn btn-emerald">
						<svg xmlns="http://www.w3.org/2000/svg" class="icon-inline" viewBox="0 0 24 24"
							fill="currentColor">
							<path d="M5 12h14v2H5v-2Zm0-4h14v2H5V8Zm0 8h14v2H5v-2Z" />
						</svg>
						Send to CGI
					</button>
					<pre id="cgiResult" class="codebox"></pre>
				</form>
			</section>

			<!-- File Upload to arbitrary path (like GET) -->
			<section class="card">
				<div class="section-title">
					<span class="icon purple">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
							<path
								d="M19 15v4H5v-4H3v4a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-4h-2Zm-6-1 4-4-1.41-1.41L13 10.17V2h-2v8.17L8.41 8.59 7 10l6 6Z" />
						</svg>
					</span>
					<h2 class="h2">Upload File (choose endpoint)</h2>
				</div>
				<form id="uploadForm" action="/uploads" method="post" enctype="multipart/form-data" class="form">
					<div>
						<label for="uploadPath" class="label">Endpoint path</label>
						<input type="text" id="uploadPath" placeholder="/uploads" value="/uploads" class="input"
							oninput="updateUploadAction()" />
					</div>
					<div>
						<label for="file" class="label">Choose a file</label>
						<input type="file" name="file" id="file" class="input-file" />
					</div>
					<button type="submit" class="btn btn-purple">
						<svg xmlns="http://www.w3.org/2000/svg" class="icon-inline" viewBox="0 0 24 24"
							fill="currentColor">
							<path d="M5 20h14v-2H5v2ZM11 4v8.17L8.41 9.59 7 11l5 5 5-5-1.41-1.41L13 12.17V4h-2Z" />
						</svg>
						Upload
					</button>
				</form>
			</section>

			<!-- DELETE Request via JS (choose path like GET) -->
			<section class="card">
				<div class="section-title">
					<span class="icon rose">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
							<path d="M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12ZM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z" />
						</svg>
					</span>
					<h2 class="h2">DELETE Request (choose path)</h2>
				</div>
				<div class="form">
					<div>
						<label for="delPath" class="label">Path to DELETE</label>
						<input type="text" id="delPath" placeholder="/uploads/example.txt" class="input" />
					</div>
					<button onclick="sendDelete()" class="btn btn-rose">
						<svg xmlns="http://www.w3.org/2000/svg" class="icon-inline" viewBox="0 0 24 24"
							fill="currentColor">
							<path
								d="M9 3h6l1 1h4v2H4V4h4l1-1Zm-1 8h2v6H8v-6Zm6 0h2v6h-2v-6ZM6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12Z" />
						</svg>
						Send DELETE
					</button>
					<pre id="deleteResult" class="codebox"></pre>
				</div>
			</section>

			<!-- Redirect Test -->
			<section class="card">
				<div class="section-title">
					<span class="icon amber">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
							<path d="M10 19l7-7-7-7v14Zm-6 0V5h2v14H4Z" />
						</svg>
					</span>
					<h2 class="h2">Redirect Test</h2>
				</div>
				<form action="/redirect" method="get">
					<button type="submit" class="btn btn-amber">
						<svg xmlns="http://www.w3.org/2000/svg" class="icon-inline" viewBox="0 0 24 24"
							fill="currentColor">
							<path d="M13 5l7 7-7 7v-4H4v-6h9V5Z" />
						</svg>
						Go to /redirect
					</button>
				</form>
			</section>
		</div>
	</main>

	<!-- Footer removed -->

	<script>
		function updateAction() {
			const select = document.getElementById("cgi-script");
			const form = document.getElementById("cgiForm");
			if (select && form) form.action = select.value;
		}

		async function submitCgi(e) {
			e.preventDefault();
			const form = document.getElementById('cgiForm');
			const methodSel = document.getElementById('cgi-method');
			const result = document.getElementById('cgiResult');
			const name = document.getElementById('name');
			const message = document.getElementById('message');
			if (!form || !methodSel || !result || !name) return;
			const action = form.action || document.getElementById('cgi-script')?.value || '/cgi-bin/python-cgi.py';
			const method = (methodSel.value || 'POST').toUpperCase();
			result.textContent = 'Sending request...';
			try {
				let res;
				if (method === 'DELETE') {
					// Encode fields into query string for DELETE
					const params = new URLSearchParams();
					params.set('name', name.value || '');
					params.set('message', message.value || '');
					const url = action + (action.includes('?') ? '&' : '?') + params.toString();
					res = await fetch(url, { method: 'DELETE' });
				} else {
					// Default POST as application/x-www-form-urlencoded
					const body = new URLSearchParams();
					body.set('name', name.value || '');
					body.set('message', message.value || '');
					res = await fetch(action, {
						method: 'POST',
						headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
						body: body.toString(),
					});
				}
				const text = await res.text();
				result.textContent = `Status: ${res.status}\n\n${text}`;
			} catch (err) {
				result.textContent = 'Error: ' + (err?.message || String(err));
			}
		}

		function updateUploadAction() {
			const input = document.getElementById('uploadPath');
			const form = document.getElementById('uploadForm');
			if (!input || !form) return;
			let path = (input.value || '').trim();
			if (!path) return; // leave previous action
			if (!path.startsWith('/')) path = '/' + path;
			form.action = path;
		}

		function submitGet(e) {
			e.preventDefault();
			const input = document.getElementById('getPath');
			if (!input) return;
			let path = (input.value || '').trim();
			if (!path) {
				input.focus();
				input.classList.add('input-error');
				setTimeout(() => input.classList.remove('input-error'), 800);
				return;
			}
			if (!path.startsWith('/')) path = '/' + path; // ensure absolute path
			window.location.href = path;
		}

		async function sendDelete() {
			const file = document.getElementById('delPath').value.trim();
			const result = document.getElementById('deleteResult');
			if (!file) {
				result.innerText = 'Please enter a file name.';
				return;
			}
			result.innerText = 'Sending request...';
			try {
				let path = file;
				if (!path.startsWith('/')) path = '/' + path;
				const res = await fetch(path, { method: 'DELETE' });
				const text = await res.text();
				result.innerText = `Status: ${res.status}\n\n${text}`;
			} catch (e) {
				result.innerText = 'Error sending DELETE: ' + e.message;
			}
		}

		document.addEventListener('DOMContentLoaded', () => {
			updateAction();
		});
	</script>
</body>

</html>